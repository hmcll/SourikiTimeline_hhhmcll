# 総力戦タイムラインメーカー@hhhmcll

@kidonaruさんの総力戦タイムラインメーカーをリメークしたものです。
![オリジナル@kidonaru](https://github.com/kidonaru/SourikiTimeline)

## 概要

総力戦のタイムラインを動画から作るものです。

### メイン機能

Youtube総力戦動画ダウンロード

自動タイムライン生成

手動タイムライン調整

動画フレーム分析

## インストール方法

### Windows

1. リポジトリをZipでダウンロードします
2. `setup.bat`を実行します。
   
### 他プラットフォーム
setup.batを読んで、自力でインストールしてください。

## アプリの起動方法

1. `run.bat`を実行してください。
   - 成功するとアプリ画面が表示されます。


## 更新手順

最新のzipをダウンロードして、解凍した中身を上書きしてください。


## 使い方

1. **プロジェクト選択画面**
   
   ![ダウンロード画面](https://github.com/hmcll/SourikiTimeline_hhhmcll/blob/main/ReadmeResources/Download.png?raw=true)
   - 黄色い枠の部分はダウンロード済のプロジェクトです
   - 新しいプロジェクトを作りたいときは赤い枠にリンクをペーストし、ダウンロードボタンを押します
   - 決まったら、プロジェクトを選択し、このプロジェクトで進むボタンを押します。

2. **分析画面**

- #### ボックス表示
   ![ボックス](https://github.com/hmcll/SourikiTimeline_hhhmcll/blob/main/ReadmeResources/Box.png?raw=true)

- #### グラフ表示

   ![グラフ](https://github.com/hmcll/SourikiTimeline_hhhmcll/blob/main/ReadmeResources/Graph.png?raw=true)

- #### テーブル表示

   ![テーブル](https://github.com/hmcll/SourikiTimeline_hhhmcll/blob/main/ReadmeResources/Table.png?raw=true)

3. **分析データ範囲調整**
   - 画面左上の動画識別コントロールパネルの`10コスト`・`20コスト`ボタンを押すと、10コスト、20コストモードを切り替えます。
   - 左下の`ボックス`ボタンを押し、データ範囲調整画面を出します。
   - 画面の左側のXWYHスライダーで動画画面上のマーカーを移動できます。
     - 動画シークバーを調整し、コストバー、時間とスキル名の部分を見えるフレームで調整してください。
   - マーカーで識別するものは右で表示されます。
     - `コスト`と`時間`は出来るだけ狭く設定してください。
     - `スキル名`は横長広めで設定してください。
   - コスト識別は微調整できます
     - 色がついたコスト画像でダブルクリックすると、コスト参照色が変わります。
     - 参照色で識別した色は判定画像で白黒で表示されます。
     - 参照色で上手く識別できない時は判定微調整スライダーで調整できます。

4. **タイムライン仮生成**
   - 画面中央のシークバーの赤、緑ラインを調整、もしくは画面左上の動画識別コントロールパネルのスダートフレーム・エンドフレームボタンで、動画識別の範囲を指定できます。
   - 画面左上の動画識別コントロールパネルで識別を押して、タイムラインを生成します。
5. **タイムライン調整**
   - 生成後、画面は自動的にグラフ表示になります。左下のグラフボタンでもグラフ表示に変えます。
   - グラフ上の緑、黄色い枠は識別したスキルです
   - ホイールクリックで識別したスキルを表示・非表示できます。
     - 黄色い枠、重複した枠、近すぎる枠を手動で確認してください。
     - タイムラインのずれが大きいや、黄色い枠が多い場合は、コスト調整をし直した上、識別ボタンで再生成してください。
6. **タイムライン整理**
   - 画面左下のテーブルボタンでテーブル表示に切り替えます。
   - グラフ表示でフレームIDを覚えて、テーブルで対応のスキル枠を探してください（次の更新で修正します）。
   - 識別したスキル枠で、無効化、即発動フラグ、発動コスト、スキル判定オフセット（後述）、スキル名、メモ（任意）を入力できます。
     - 即発動フラフは＠・即ボタンを押すと切り替えます。
   - コストフレーム、スキルフレームボタンを押すと、スキル使用、スキル名判定フレームに飛べます。
   - スキル判定がずれた場合（スキル使用後、次のスキルをホールドしバレットタイムが長続く場合）
     - このスキルのスキル名判定時間をずれることができます。
     - スキル判定フレームは、スキル使用フレームの時間点+全体スキル判定オフセット(**ms**)+スキル判定オフセット(**ms**)です。
       - 全体オフセットは左上、単体はテーブル表示で変えます。
       - 変更後、スキルフレームで判定で使うフレームを見れます。
       - 変更後、左上の`スキルだけ再生成`ボタンで、*すべての*スキル枠を再識別できます。
         - ***識別したスキル名への変更はクリアされます***
7. **タイムライン出力**
   - 右上の`タイムライン出力`ボタンで調整したタイムラインを生成できます。
   - 生成するタイムラインは**コスト**、**生徒名**、**時間点**、**備考**の順で、TSV形式で表示されます。

## 注意事項 - @kidonaru

このアプリケーションは、趣味の範囲での使用目的で作成されており、商用利用は禁止しています。

また、このアプリケーションを使用したことによるいかなる損害に対しても責任を負いません。

生成したタイムラインは自由に利用してもらって構いませんが、元動画の投稿者ではない場合は個人の使用範囲での利用をお願いします。

## 補足

### 識別し難しい生徒
- ヒナ（ドレス）の連射スキルは生成したタイムラインに手動で追加してください。

- リオのスキル名は識別できない場合が多くあります。リオ入りのタイムラインを分析するときは注意してください。

### 追加機能や質問など

@HHHmcllまでDMしてください

https://twitter.com/HHHmcll


## Credits
- オリジナル作者さん - ![@kidonaru](https://twitter.com/kidonaru) https://github.com/kidonaru/SourikiTimeline
- ブルーアーカイブ (Blue Archive) - https://bluearchive.jp/
   - ゲームの情報を参照しています
- ブルーアーカイブ(ブルアカ)攻略Wiki - https://gamerch.com/bluearchive/
  - スキル一覧の情報を参照しています
